<div class="rating-page">
  <mat-card class="rating-card">
    <div class="rating-header">
      <h2>Product Rating</h2>
    </div>
    <div *ngIf="product$ | async as product" class="rating-product">
      <p class="rating-line">
        Product: <strong>{{ product.name }}</strong>
      </p>
      <p class="rating-line">
        Price: <strong>{{ product.price }} €</strong>
      </p>
    </div>

    <p class="rating-subtitle">
      Average rating and number of votes for this product.
    </p>

    <div class="rating-status">
      <p *ngIf="error$ | async as error" class="error-text">
        {{ error }}
      </p>
    </div>

    <div *ngIf="rating$ | async as rating" class="rating-result">
      <p class="rating-line">
        Product ID: <strong>{{ rating.product_id }}</strong>
      </p>
      <p class="rating-line">
        Average rating:
        <strong>{{ rating.avg_rating != null ? rating.avg_rating.toFixed(1) : '-' }}/5</strong>/5
      </p>
      <p class="rating-line">
        Votes: <strong>{{ rating.count }}</strong>
      </p>
    </div>

    <div class="rating-actions" *ngIf="product$ | async as product">
      <button
        mat-raised-button
        color="primary"
        (click)="addToCart(product)"
      >
        Add to cart
      </button>

      <button mat-stroked-button color="primary" routerLink="/shop/products">
        ← Back to products
      </button>
    </div>
  </mat-card>
</div>
